---
import "../styles/global.css";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";

export interface Props {
	title: string;
	description?: string;
	keywords?: string;
	author?: string;
	language?: string;
	revisitAfter?: string;
	applicationName?: string;
	themeColor?: string;
	mobileWebAppCapable?: string;
	appleMobileWebAppCapable?: string;
	appleMobileWebAppStatusBarStyle?: string;
	appleMobileWebAppTitle?: string;
	ogTitle?: string;
	ogDescription?: string;
	ogImage?: string;
	ogImageWidth?: string;
	ogImageHeight?: string;
	ogImageAlt?: string;
	ogSiteName?: string;
	ogLocale?: string;
	ogLocaleAlternate?: string;
	ogUrl?: string;
	twitterCard?: string;
	twitterTitle?: string;
	twitterDescription?: string;
	twitterImage?: string;
	twitterCreator?: string;
	twitterSite?: string;
	twitterImageAlt?: string;
	linkedinOwner?: string;
	lineTitle?: string;
	lineDescription?: string;
	geoRegion?: string;
	geoPlacename?: string;
	businessStreetAddress?: string;
	businessLocality?: string;
	businessRegion?: string;
	businessCountryName?: string;
	businessPhoneNumber?: string;
	aiPurpose?: string;
	aiContentType?: string;
	aiTargetAudience?: string;
	aiKeyBenefits?: string;
	aiSummary?: string;
	aiContentQuality?: string;
	canonicalUrl?: string;
	articlePublished?: string;
	articleModified?: string;
	schemaType?: string;
}

const { 
	title, 
	description, 
	keywords,
	author,
	language = "th-TH",
	revisitAfter,
	applicationName,
	themeColor,
	mobileWebAppCapable,
	appleMobileWebAppCapable,
	appleMobileWebAppStatusBarStyle,
	appleMobileWebAppTitle,
	ogTitle,
	ogDescription,
	ogImage,
	ogImageWidth,
	ogImageHeight,
	ogImageAlt,
	ogSiteName,
	ogLocale,
	ogLocaleAlternate,
	ogUrl,
	twitterCard,
	twitterTitle,
	twitterDescription,
	twitterImage,
	twitterCreator,
	twitterSite,
	twitterImageAlt,
	linkedinOwner,
	lineTitle,
	lineDescription,
	geoRegion,
	geoPlacename,
	businessStreetAddress,
	businessLocality,
	businessRegion,
	businessCountryName,
	businessPhoneNumber,
	aiPurpose,
	aiContentType,
	aiTargetAudience,
	aiKeyBenefits,
	aiSummary,
	aiContentQuality,
	canonicalUrl, 
	articlePublished, 
	articleModified,
	schemaType = "Organization"
} = Astro.props;

const defaultDescription = "SML Soft - โปรแกรมบัญชี POS ERP ระบบ AI ครบวงจร สำหรับ SMEs ไทย | Digital Transformation | AI Solutions | Cloud Computing";
const defaultKeywords = "โปรแกรมบัญชี, โปรแกรม POS, ระบบ ERP, AI สำหรับธุรกิจ, Digital Transformation, Cloud Computing, SMEs Thailand, โปรแกรมจัดการร้านค้า, ระบบบัญชีออนไลน์, AI Agent, Agentic AI";
const siteUrl = "https://www.smlsoft.com";
const currentUrl = canonicalUrl || `${siteUrl}${Astro.url.pathname}`;
const fullTitle = title ? `${title} | SML Soft - โปรแกรมบัญชี POS ERP AI` : "SML Soft - โปรแกรมบัญชี POS ERP AI สำหรับ SMEs ไทย";

// Structured Data
const structuredData = {
	"@context": "https://schema.org",
	"@type": schemaType,
	"name": "SML Soft",
	"alternateName": "บริษัท เอสเอ็มแอล ซอฟต์ จำกัด",
	"description": description || defaultDescription,
	"url": siteUrl,
	"logo": `${siteUrl}/favicon.svg`,
	"sameAs": [
		"https://www.facebook.com/smlsoft",
		"https://line.me/R/ti/p/@smlsoft"
	],
	"contactPoint": {
		"@type": "ContactPoint",
		"telephone": "+66814345533",
		"contactType": "customer service",
		"areaServed": "TH",
		"availableLanguage": "th"
	},
	"address": {
		"@type": "PostalAddress",
		"addressCountry": "TH",
		"addressRegion": "Bangkok"
	}
};

// Add article-specific structured data
if (schemaType === "Article") {
	structuredData["@type"] = "Article";
	structuredData.headline = title;
	structuredData.datePublished = articlePublished;
	structuredData.dateModified = articleModified || articlePublished;
	structuredData.author = {
		"@type": "Organization",
		"name": "SML Soft"
	};
}
---

<!doctype html>
<html lang={language || "th"} prefix="og: https://ogp.me/ns#">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
		<meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
		<meta name="googlebot" content="index, follow" />
		
		<!-- Canonical URL -->
		<link rel="canonical" href={ogUrl || currentUrl} />
		
		<!-- Favicon and Icons -->
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="apple-touch-icon" href="/favicon.svg" />
		
		<!-- PWA Meta Tags -->
		{themeColor && <meta name="theme-color" content={themeColor} />}
		{mobileWebAppCapable && <meta name="mobile-web-app-capable" content={mobileWebAppCapable} />}
		{appleMobileWebAppCapable && <meta name="apple-mobile-web-app-capable" content={appleMobileWebAppCapable} />}
		{appleMobileWebAppStatusBarStyle && <meta name="apple-mobile-web-app-status-bar-style" content={appleMobileWebAppStatusBarStyle} />}
		{appleMobileWebAppTitle && <meta name="apple-mobile-web-app-title" content={appleMobileWebAppTitle} />}
		{applicationName && <meta name="application-name" content={applicationName} />}
		
		<!-- Generator -->
		<meta name="generator" content={Astro.generator} />
		
		<!-- Primary Meta Tags -->
		<title>{fullTitle}</title>
		<meta name="title" content={fullTitle} />
		<meta name="description" content={description || defaultDescription} />
		<meta name="keywords" content={keywords || defaultKeywords} />
		<meta name="author" content={author || "SML Soft - บริษัท เอสเอ็มแอล ซอฟต์ จำกัด"} />
		<meta name="language" content={language || "Thai"} />
		<meta name="revisit-after" content={revisitAfter || "7 days"} />
		
		<!-- AI-specific Meta Tags -->
		{aiPurpose && <meta name="ai:purpose" content={aiPurpose} />}
		{aiContentType && <meta name="ai:content-type" content={aiContentType} />}
		{aiTargetAudience && <meta name="ai:target-audience" content={aiTargetAudience} />}
		{aiKeyBenefits && <meta name="ai:key-benefits" content={aiKeyBenefits} />}
		{aiSummary && <meta name="ai:summary" content={aiSummary} />}
		{aiContentQuality && <meta name="ai:content-quality" content={aiContentQuality} />}
		
		<!-- Geographic Meta Tags -->
		{geoRegion && <meta name="geo.region" content={geoRegion} />}
		{geoPlacename && <meta name="geo.placename" content={geoPlacename} />}
		
		<!-- Business Meta Tags -->
		{businessStreetAddress && <meta name="business:contact_data:street_address" content={businessStreetAddress} />}
		{businessLocality && <meta name="business:contact_data:locality" content={businessLocality} />}
		{businessRegion && <meta name="business:contact_data:region" content={businessRegion} />}
		{businessCountryName && <meta name="business:contact_data:country_name" content={businessCountryName} />}
		{businessPhoneNumber && <meta name="business:contact_data:phone_number" content={businessPhoneNumber} />}
		
		<!-- Open Graph / Facebook -->
		<meta property="og:type" content={schemaType === "Article" ? "article" : "website"} />
		<meta property="og:url" content={ogUrl || currentUrl} />
		<meta property="og:title" content={ogTitle || fullTitle} />
		<meta property="og:description" content={ogDescription || description || defaultDescription} />
		<meta property="og:image" content={ogImage || `${siteUrl}/favicon.svg`} />
		{ogImageWidth && <meta property="og:image:width" content={ogImageWidth} />}
		{ogImageHeight && <meta property="og:image:height" content={ogImageHeight} />}
		{ogImageAlt && <meta property="og:image:alt" content={ogImageAlt} />}
		<meta property="og:site_name" content={ogSiteName || "SML Soft"} />
		<meta property="og:locale" content={ogLocale || "th_TH"} />
		{ogLocaleAlternate && <meta property="og:locale:alternate" content={ogLocaleAlternate} />}
		
		<!-- Twitter -->
		<meta property="twitter:card" content={twitterCard || "summary_large_image"} />
		<meta property="twitter:url" content={ogUrl || currentUrl} />
		<meta property="twitter:title" content={twitterTitle || fullTitle} />
		<meta property="twitter:description" content={twitterDescription || description || defaultDescription} />
		<meta property="twitter:image" content={twitterImage || ogImage || `${siteUrl}/favicon.svg`} />
		{twitterImageAlt && <meta property="twitter:image:alt" content={twitterImageAlt} />}
		{twitterCreator && <meta property="twitter:creator" content={twitterCreator} />}
		{twitterSite && <meta property="twitter:site" content={twitterSite} />}
		
		<!-- LinkedIn -->
		{linkedinOwner && <meta property="linkedin:owner" content={linkedinOwner} />}
		
		<!-- LINE -->
		{lineTitle && <meta property="line:title" content={lineTitle} />}
		{lineDescription && <meta property="line:description" content={lineDescription} />}
		
		<!-- Structured Data -->
		<script type="application/ld+json" set:html={JSON.stringify(structuredData)} />
		
		<!-- Google Analytics (Optional) -->
		<!-- Add GA4 tracking code here if needed -->
		
		<!-- Performance Hints -->
		<link rel="dns-prefetch" href="//fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		
		<!-- Additional Meta Tags -->
		<meta name="format-detection" content="telephone=no" />
		<meta name="msapplication-TileColor" content={themeColor || "#3B82F6"} />
	</head>
	
	<body class="min-h-screen bg-gray-50">
		<Header />
		<main>
			<slot />
		</main>
		<Footer />
	</body>
</html>
