---
import "../styles/global.css";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";

export interface Props {
	title: string;
	description?: string;
	keywords?: string;
	author?: string;
	language?: string;
	revisitAfter?: string;
	applicationName?: string;
	themeColor?: string;
	mobileWebAppCapable?: string;
	appleMobileWebAppCapable?: string;
	appleMobileWebAppStatusBarStyle?: string;
	appleMobileWebAppTitle?: string;
	ogTitle?: string;
	ogDescription?: string;
	ogImage?: string;
	ogImageWidth?: string;
	ogImageHeight?: string;
	ogImageAlt?: string;
	ogSiteName?: string;
	ogLocale?: string;
	ogLocaleAlternate?: string;
	ogUrl?: string;
	twitterCard?: string;
	twitterTitle?: string;
	twitterDescription?: string;
	twitterImage?: string;
	twitterCreator?: string;
	twitterSite?: string;
	twitterImageAlt?: string;
	linkedinOwner?: string;
	lineTitle?: string;
	lineDescription?: string;
	geoRegion?: string;
	geoPlacename?: string;
	businessStreetAddress?: string;
	businessLocality?: string;
	businessRegion?: string;
	businessCountryName?: string;
	businessPhoneNumber?: string;
	aiPurpose?: string;
	aiContentType?: string;
	aiTargetAudience?: string;
	aiKeyBenefits?: string;
	aiSummary?: string;
	aiContentQuality?: string;
	canonicalUrl?: string;
	articlePublished?: string;
	articleModified?: string;
	schemaType?: string;
}

const {
	title,
	description,
	keywords,
	author,
	language = "th-TH",
	revisitAfter,
	applicationName,
	themeColor,
	mobileWebAppCapable,
	appleMobileWebAppCapable,
	appleMobileWebAppStatusBarStyle,
	appleMobileWebAppTitle,
	ogTitle,
	ogDescription,
	ogImage,
	ogImageWidth,
	ogImageHeight,
	ogImageAlt,
	ogSiteName,
	ogLocale,
	ogLocaleAlternate,
	ogUrl,
	twitterCard,
	twitterTitle,
	twitterDescription,
	twitterImage,
	twitterCreator,
	twitterSite,
	twitterImageAlt,
	linkedinOwner,
	lineTitle,
	lineDescription,
	geoRegion,
	geoPlacename,
	businessStreetAddress,
	businessLocality,
	businessRegion,
	businessCountryName,
	businessPhoneNumber,
	aiPurpose,
	aiContentType,
	aiTargetAudience,
	aiKeyBenefits,
	aiSummary,
	aiContentQuality,
	canonicalUrl,
	articlePublished,
	articleModified,
	schemaType = "Organization",
} = Astro.props;

const defaultDescription =
	"SML Soft - โปรแกรมบัญชี POS ERP ระบบ AI ครบวงจร สำหรับ SMEs ไทย | Digital Transformation | AI Solutions | Cloud Computing | 20+ ปีประสบการณ์ | ลูกค้า 1,000+ ราย | AI Agent | Agentic AI | B2B E-Commerce | โปรแกรมสำนักงานบัญชี";
const defaultKeywords =
	"โปรแกรมบัญชี, โปรแกรม POS, ระบบ ERP, โปรแกรมร้านค้าปลีก, โปรแกรม AI, โปรแกรมร้านวัสดุก่อสร้าง, ระบบบัญชี, โปรแกรมขายหน้าร้าน, AI สำหรับธุรกิจ, Digital Transformation, Cloud Computing, SMEs Thailand, โปรแกรมจัดการร้านค้า, ระบบบัญชีออนไลน์, AI Agent, Agentic AI, artificial intelligence, machine learning, business intelligence, automated accounting, smart POS system, B2B marketplace, E-commerce platform, SML Account, SML POS, SML Market B2B, business automation, data analytics, predictive analytics, customer management, inventory management, sales forecasting, financial reporting, tax calculation, receipt management, barcode scanning, QR code payment, EDC integration, mobile POS, cloud-based software, real-time reporting, multi-branch system, promotional system, loyalty program, accounting software Thailand, POS system Thailand, ERP Thailand, สำนักงานบัญชี, โปรแกรมขายหน้าร้าน, ระบบจัดการสต็อค, ระบบใบกำกับภาษี, ระบบเงินเดือน, ระบบบุคคล, โปรแกรมสำนักงานบัญชี, โปรแกรมร้านอะไหล่, โปรแกรมร้านขายยา, โปรแกรมร้านเสื้อผ้า, โปรแกรมโรงงาน, ระบบ Manufacturing, Software Thailand, โปรแกรมไทย, ซอฟต์แวร์ธุรกิจ, โปรแกรมขายส่ง, โปรแกรมขายปลีก, ระบบขายส่งขายปลีก";
const siteUrl = "https://www.smlsoft.com";
const currentUrl = canonicalUrl || `${siteUrl}${Astro.url.pathname}`;
const fullTitle = title
	? `${title} | SML Soft - โปรแกรมบัญชี POS ERP AI`
	: "SML Soft - โปรแกรมบัญชี POS ERP AI สำหรับ SMEs ไทย";

// Structured Data
const structuredData: any = {
	"@context": "https://schema.org",
	"@type": schemaType,
	name: "SML Soft",
	alternateName: "บริษัท เอสเอ็มแอล ซอฟต์ จำกัด",
	description: description || defaultDescription,
	url: siteUrl,
	logo: `${siteUrl}/favicon.svg`,
	foundingDate: "2004",
	email: "info@smlsoft.com",
	telephone: "+66814345533",
	taxID: "0135549000236",
	sameAs: [
		"https://www.facebook.com/page.smlsoft",
		"https://line.me/R/ti/p/@smlsoft",
		"https://www.youtube.com/@smlsoftyoutube1545",
	],
	address: [
		{
			"@type": "PostalAddress",
			addressCountry: "TH",
			addressRegion: "Bangkok",
			addressLocality: "Nonthaburi",
			streetAddress:
				"Software Park Building, 7th Floor, Chaeng Watthana Road",
			postalCode: "11120",
		},
		{
			"@type": "PostalAddress",
			addressCountry: "TH",
			addressRegion: "Chiang Mai",
			addressLocality: "San Kamphaeng",
			streetAddress: "141/469 Moo 2, Ton Pao",
			postalCode: "50130",
		},
	],
	contactPoint: [
		{
			"@type": "ContactPoint",
			telephone: "+66814345533",
			contactType: "sales",
			areaServed: "TH",
			availableLanguage: ["Thai", "English"],
			contactOption: "TollFree",
		},
		{
			"@type": "ContactPoint",
			telephone: "+66899223131",
			contactType: "customer service",
			areaServed: "TH",
			availableLanguage: "Thai",
		},
	],
	offers: [
		{
			"@type": "Offer",
			name: "SML Account - โปรแกรมบัญชี",
			description: "ระบบบัญชีสำเร็จรูปสำหรับ SMEs",
			category: "Accounting Software",
		},
		{
			"@type": "Offer",
			name: "SML POS - ระบบขายหน้าร้าน",
			description: "ระบบขายหน้าร้านครบครัน",
			category: "POS System",
		},
		{
			"@type": "Offer",
			name: "AI Connect - โซลูชั่น AI",
			description: "ระบบ AI สำหรับวิเคราะห์ข้อมูลธุรกิจ",
			category: "AI Solutions",
		},
		{
			"@type": "Offer",
			name: "SML Market B2B - E-Commerce Platform",
			description: "แพลตฟอร์ม B2B E-Commerce สำหรับธุรกิจขายส่ง",
			category: "B2B E-Commerce",
		},
	],
	serviceArea: {
		"@type": "Country",
		name: "Thailand",
	},
	aggregateRating: {
		"@type": "AggregateRating",
		ratingValue: "4.8",
		reviewCount: "1000",
		bestRating: "5",
	},
	numberOfEmployees: "15+",
	knowsAbout: [
		"Accounting Software",
		"POS Systems",
		"ERP Systems",
		"AI Solutions",
		"Business Intelligence",
		"E-Commerce Platforms",
		"Cloud Computing",
		"Digital Transformation",
		"SME Solutions",
		"Thai Business Software",
	],
};

// Add article-specific structured data
if (schemaType === "Article") {
	structuredData["@type"] = "Article";
	structuredData["headline"] = title;
	structuredData["datePublished"] = articlePublished;
	structuredData["dateModified"] = articleModified || articlePublished;
	structuredData["author"] = {
		"@type": "Organization",
		name: "SML Soft",
	};
}
---

<!doctype html>
<html lang={language || "th"} prefix="og: https://ogp.me/ns#">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"
		/>
		<meta
			name="robots"
			content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1"
		/>
		<meta name="googlebot" content="index, follow" />

		<!-- Canonical URL -->
		<link rel="canonical" href={currentUrl} />

		<!-- Sitemap Discovery -->
		<link rel="sitemap" type="application/xml" href="/sitemap-index.xml" />
		
		<!-- RSS Feed Discovery -->
		<link rel="alternate" type="application/rss+xml" title="SML Soft RSS Feed" href="/rss.xml" />

		<!-- Favicon and Icons -->
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="apple-touch-icon" href="/favicon.svg" />
		<link rel="manifest" href="/manifest.json" />
		<!-- Generator -->
		<meta name="generator" content={Astro.generator} />

		<!-- Primary Meta Tags -->
		<title>{fullTitle}</title>
		<meta name="title" content={fullTitle} />
		<meta name="description" content={description || defaultDescription} />
		<meta name="keywords" content={keywords || defaultKeywords} />
		<meta
			name="author"
			content={author || "SML Soft - บริษัท เอสเอ็มแอล ซอฟต์ จำกัด"}
		/>
		<meta name="language" content={language || "Thai"} />
		<meta name="revisit-after" content={revisitAfter || "7 days"} />

		<!-- Performance and Accessibility Meta Tags -->
		<meta name="color-scheme" content="light dark" />
		<meta name="supported-color-schemes" content="light dark" />
		<meta name="referrer" content="strict-origin-when-cross-origin" />
		<meta name="rating" content="general" />
		<meta name="distribution" content="global" />
		<meta name="expires" content="never" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta http-equiv="Content-Language" content="th-TH" />
		<meta name="HandheldFriendly" content="true" />
		<meta name="MobileOptimized" content="width" />
		<meta name="target" content="all" />
		<meta name="audience" content="all" />
		<meta name="classification" content="business software" />
		<meta name="subject" content="accounting software, POS system, business automation" />
		<meta name="coverage" content="Thailand" />
		<meta name="city" content="Bangkok" />
		<meta name="country" content="Thailand" />
		<meta name="state" content="Bangkok" />

		<!-- AI-specific Meta Tags -->
		{aiPurpose && <meta name="ai:purpose" content={aiPurpose} />}
		{aiContentType && <meta name="ai:content-type" content={aiContentType} />}
		{aiTargetAudience && <meta name="ai:target-audience" content={aiTargetAudience} />}
		{aiKeyBenefits && <meta name="ai:key-benefits" content={aiKeyBenefits} />}
		{aiSummary && <meta name="ai:summary" content={aiSummary} />}
		{aiContentQuality && <meta name="ai:content-quality" content={aiContentQuality} />}

		<!-- Enhanced SEO Meta Tags -->
		<meta name="application-name" content={applicationName || "SML Soft"} />
		<meta name="theme-color" content={themeColor || "#3B82F6"} />
		<meta name="msapplication-TileColor" content={themeColor || "#3B82F6"} />
		<meta name="format-detection" content="telephone=yes" />
		<meta name="mobile-web-app-capable" content={mobileWebAppCapable || "yes"} />
		<meta name="apple-mobile-web-app-capable" content={appleMobileWebAppCapable || "yes"} />
		<meta name="apple-mobile-web-app-status-bar-style" content={appleMobileWebAppStatusBarStyle || "default"} />
		<meta name="apple-mobile-web-app-title" content={appleMobileWebAppTitle || "SML Soft"} />

		<!-- Geographic Meta Tags -->
		<meta name="geo.region" content={geoRegion || "TH"} />
		<meta name="geo.placename" content={geoPlacename || "Bangkok"} />

		<!-- Business Meta Tags -->
		<meta name="business.contact_data.street_address" content={businessStreetAddress || "Bangkok, Thailand"} />
		<meta name="business.contact_data.locality" content={businessLocality || "Bangkok"} />
		<meta name="business.contact_data.region" content={businessRegion || "TH"} />
		<meta name="business.contact_data.country_name" content={businessCountryName || "Thailand"} />
		<meta name="business.contact_data.phone_number" content={businessPhoneNumber || "+66814345533"} />

		<!-- Open Graph / Facebook -->
		<meta
			property="og:type"
			content={schemaType === "Article" ? "article" : "website"}
		/>
		<meta property="og:url" content={ogUrl || currentUrl} />
		<meta property="og:title" content={ogTitle || fullTitle} />
		<meta
			property="og:description"
			content={ogDescription || description || defaultDescription}
		/>
		<meta
			property="og:image"
			content={ogImage || `${siteUrl}/favicon.svg`}
		/>
		<meta property="og:image:width" content={ogImageWidth || "1200"} />
		<meta property="og:image:height" content={ogImageHeight || "630"} />
		{ogImageAlt && <meta property="og:image:alt" content={ogImageAlt} />}
		<meta property="og:site_name" content={ogSiteName || "SML Soft"} />
		<meta property="og:locale" content={ogLocale || "th_TH"} />
		<meta property="og:locale:alternate" content={ogLocaleAlternate || "en_US"} />

		<!-- Twitter -->
		<meta property="twitter:card" content={twitterCard || "summary_large_image"} />
		<meta property="twitter:url" content={ogUrl || currentUrl} />
		<meta property="twitter:title" content={twitterTitle || fullTitle} />
		<meta
			property="twitter:description"
			content={twitterDescription || description || defaultDescription}
		/>
		<meta
			property="twitter:image"
			content={twitterImage || ogImage || `${siteUrl}/favicon.svg`}
		/>
		{twitterImageAlt && <meta property="twitter:image:alt" content={twitterImageAlt} />}
		<meta property="twitter:creator" content={twitterCreator || "@smlsoft"} />
		<meta property="twitter:site" content={twitterSite || "@smlsoft"} />

		<!-- LinkedIn -->
		<meta property="linkedin:owner" content={linkedinOwner || "SML Soft"} />

		<!-- Line -->
		<meta property="line:title" content={lineTitle || fullTitle} />
		<meta
			property="line:description"
			content={lineDescription || description || defaultDescription}
		/>

		<!-- Preconnect to External Resources -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link rel="preconnect" href="https://www.googletagmanager.com" />

		<!-- DNS Prefetch -->
		<link rel="dns-prefetch" href="//fonts.googleapis.com" />
		<link rel="dns-prefetch" href="//www.google-analytics.com" />
		<link rel="dns-prefetch" href="//cdnjs.cloudflare.com" />

		<!-- Preload Critical Resources -->
		<link rel="preload" href="/favicon.svg" as="image" type="image/svg+xml" />
		<link rel="preload" href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700&display=swap" as="style" />

		<!-- Fonts -->
		<link
			href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700&display=swap"
			rel="stylesheet"
		/>

		<!-- Structured Data -->
		<script
			type="application/ld+json"
			set:html={JSON.stringify(structuredData)}
		/>

		<!-- Google Analytics -->
		<script
			async
			src="https://www.googletagmanager.com/gtag/js?id=G-KVZRB8RF05"
		></script>
		<script is:inline>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag("js", new Date());
			gtag("config", "G-KVZRB8RF05", {
				page_title: document.title,
				page_location: window.location.href,
			});
		</script>

		<!-- Google tag (gtag.js) -->
		<script
			async
			src="https://www.googletagmanager.com/gtag/js?id=AW-1054730371"
		></script>
		<script is:inline>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag("js", new Date());

			gtag("config", "AW-1054730371");
		</script>
	</head>
	
	<body class="min-h-screen bg-gray-50">
		<Header />
		<main>
			<slot />
		</main>
		<Footer />
	</body>
</html>
